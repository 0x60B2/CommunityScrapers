name: iwara.tv
sceneByURL:
  - action: scrapeJson
    url:
      - iwara.tv/video/
    queryURL: "{url}"
    queryURLReplace:
      url:
        - regex: "[^/]+$"
          with: ""
        - regex: "https://www.iwara.tv/video/"
          with: "https://api.iwara.tv/video/"
    scraper: sceneScraper

jsonScrapers:
  sceneScraper:
    scene:
      Title: title
      Date:
        selector: file.createdAt
        postProcess:
          - replace:
              - regex: '(\d{4}-\d{2}-\d{2}).*'
                with: $1
          - parseDate: "2006-01-02"
      Studio:
        Name: user.name
      Tags:
        Name: tags.#.id
      Details: body
      # Some videos have a custom thumbnail and we'll want to use that if possible
      # example of scene with custom thumbnail: https://www.iwara.tv/video/J7W7n4VdKtohQ7/
      # example of scene with normal thumbnail: https://www.iwara.tv/video/2DORyCe5fVqXz6/
      Image:
        selector: "[customThumbnail.id,file.id,thumbnail]"
        concat: ","
        postProcess:
          - replace:
              # If we found a customThumbnail use it and discard the rest
              - regex: "([^,]+),[^,]+,.*"
                with: "https://i.iwara.tv/image/original/$1/$1.jpg"
              - regex: (.*),(.*)
                with: "https://i.iwara.tv/image/original/$1/thumbnail-0$2.jpg"
# Last Updated October 05, 2023
